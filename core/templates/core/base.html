{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Timeless Cart{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="{% static 'timelesscart-logo.png' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="{% static 'core/css/theme.css' %}" rel="stylesheet">
    {% block extra_head %}{% endblock %}
    {% block extra_css %}{% endblock %}
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
      
      * {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      }

      /* Advanced Animations */
      @keyframes fadeInDown {
        from { 
          opacity: 0; 
          transform: translateY(-30px) scale(0.95); 
        }
        to { 
          opacity: 1; 
          transform: translateY(0) scale(1); 
        }
      }

      @keyframes liquidGlow {
        0% { 
          text-shadow: 0 0 8px rgba(255, 255, 255, 0.4), 
                       0 0 15px rgba(146, 64, 14, 0.3),
                       0 2px 6px rgba(0, 0, 0, 0.2); 
        }
        50% { 
          text-shadow: 0 0 20px rgba(255, 255, 255, 0.8), 
                       0 0 30px rgba(146, 64, 14, 0.6),
                       0 4px 12px rgba(0, 0, 0, 0.4); 
        }
        100% { 
          text-shadow: 0 0 8px rgba(255, 255, 255, 0.4), 
                       0 0 15px rgba(146, 64, 14, 0.3),
                       0 2px 6px rgba(0, 0, 0, 0.2); 
        }
      }

      @keyframes shimmer {
        0% { background-position: -200% center; }
        100% { background-position: 200% center; }
      }

      @keyframes pulse-ring {
        0% {
          transform: scale(0.8);
          opacity: 1;
        }
        100% {
          transform: scale(2.4);
          opacity: 0;
        }
      }

      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-6px); }
      }

      /* Advanced Header Enhancements */
      header {
        animation: fadeInDown 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        background: linear-gradient(135deg, 
          rgba(220, 38, 38, 0.95) 0%,
          rgba(153, 27, 27, 0.95) 50%,
          rgba(127, 29, 29, 0.95) 100%);
        backdrop-filter: blur(20px) saturate(1.2);
        border-bottom: 2px solid rgba(255, 255, 255, 0.15);
        box-shadow: 
          0 20px 60px rgba(0, 0, 0, 0.15),
          0 8px 32px rgba(220, 38, 38, 0.1),
          0 1px 0 rgba(255, 255, 255, 0.2) inset,
          0 -1px 0 rgba(0, 0, 0, 0.1) inset;
        position: relative;
        overflow: visible;
        z-index: 1000;
      }
      
      /* Ensure dropdown container doesn't get clipped */
      .header-container {
        position: relative;
        overflow: visible !important;
      }
      
      /* Profile dropdown specific fixes */
      #profile-dropdown {
        position: absolute !important;
        top: calc(100% + 8px) !important;
        right: 0 !important;
        z-index: 99999 !important;
        transform-origin: top right !important;
      }

      header::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 200%;
        height: 100%;
        background: linear-gradient(90deg, 
          transparent 0%, 
          rgba(255, 255, 255, 0.05) 25%,
          rgba(255, 255, 255, 0.15) 50%,
          rgba(255, 255, 255, 0.05) 75%,
          transparent 100%);
        animation: shimmer 4s infinite ease-in-out;
        pointer-events: none;
        z-index: 1;
      }

      header::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: 
          radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
          radial-gradient(circle at 80% 80%, rgba(255, 120, 120, 0.1) 0%, transparent 50%),
          radial-gradient(circle at 40% 60%, rgba(255, 200, 200, 0.05) 0%, transparent 40%);
        pointer-events: none;
        z-index: 0;
      }

      .header-container {
        position: relative;
        z-index: 2;
      }

      /* Floating Particles Effect */
      .header-particles {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        pointer-events: none;
        z-index: 1;
      }

      .particle {
        position: absolute;
        width: 3px;
        height: 3px;
        background: rgba(255, 255, 255, 0.4);
        border-radius: 50%;
        animation: floatParticles 8s infinite linear;
      }

      @keyframes floatParticles {
        0% {
          transform: translateY(100vh) translateX(0) scale(0);
          opacity: 0;
        }
        10% {
          opacity: 1;
          transform: scale(1);
        }
        90% {
          opacity: 1;
        }
        100% {
          transform: translateY(-10vh) translateX(100px) scale(0);
          opacity: 0;
        }
      }

      .particle:nth-child(2) { left: 20%; animation-delay: -2s; animation-duration: 6s; }
      .particle:nth-child(3) { left: 40%; animation-delay: -4s; animation-duration: 8s; }
      .particle:nth-child(4) { left: 60%; animation-delay: -1s; animation-duration: 7s; }
      .particle:nth-child(5) { left: 80%; animation-delay: -3s; animation-duration: 9s; }

      /* Simple Logo */
      .logo-container:hover {
        opacity: 0.8;
        transition: opacity 0.3s ease;
      }

      .logo-text {
        color: white;
        font-weight: 900;
        letter-spacing: 2px;
      }

      /* Enhanced Navigation */
      .nav-link {
        position: relative;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
      }

      .nav-link::before {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 50%;
        width: 0;
        height: 2px;
        background: linear-gradient(90deg, transparent, #A0522D, transparent);
        transform: translateX(-50%);
        transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .nav-link::after {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(255, 255, 255, 0.1), 
          transparent);
        transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .nav-link:hover::before {
        width: 100%;
      }

      .nav-link:hover::after {
        left: 100%;
      }

      .nav-link:hover, .nav-link:focus {
        animation: liquidGlow 2s infinite ease-in-out;
        transform: translateY(-3px) scale(1.02);
        color: #fef2f2;
      }

      .nav-link:active {
        transform: translateY(0) scale(0.98);
        transition-duration: 0.1s;
      }

      /* Glass Search Bar */
      .search-container {
        position: relative;
        overflow: hidden;
      }

      .search-input {
        background: rgba(255, 255, 255, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        color: white;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .search-input::placeholder {
        color: rgba(255, 255, 255, 0.7);
      }

      .search-input:focus {
        background: rgba(255, 255, 255, 0.25);
        border-color: rgba(255, 255, 255, 0.4);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2),
                    0 0 0 4px rgba(255, 255, 255, 0.1);
        transform: scale(1.02);
        color: white;
      }

      .search-btn {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        color: rgba(255, 255, 255, 0.8);
      }

      .search-btn:hover {
        color: white;
        transform: scale(1.1) rotate(5deg);
      }

      /* Mobile Menu Enhancements */
      .mobile-menu-toggle {
        position: relative;
        width: 44px;
        height: 44px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
      }

      .mobile-menu-toggle::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(255, 255, 255, 0.2), 
          transparent);
        transition: left 0.6s ease;
      }

      .mobile-menu-toggle:hover::before {
        left: 100%;
      }

      .mobile-menu-toggle:hover {
        background: rgba(255, 255, 255, 0.2);
        border-color: rgba(255, 255, 255, 0.3);
        transform: scale(1.05);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }

      .mobile-menu-toggle:active {
        transform: scale(0.95);
        transition-duration: 0.1s;
      }

      /* Hamburger Animation */
      .hamburger-line {
        display: block;
        width: 20px;
        height: 2px;
        background: white;
        border-radius: 1px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
      }

      .hamburger-line::before,
      .hamburger-line::after {
        content: '';
        position: absolute;
        width: 20px;
        height: 2px;
        background: white;
        border-radius: 1px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .hamburger-line::before {
        top: -6px;
      }

      .hamburger-line::after {
        top: 6px;
      }

      .menu-open .hamburger-line {
        background: transparent;
      }

      .menu-open .hamburger-line::before {
        transform: rotate(45deg);
        top: 0;
      }

      .menu-open .hamburger-line::after {
        transform: rotate(-45deg);
        top: 0;
      }

      #mobile-menu {
        background: linear-gradient(135deg, 
          rgba(127, 29, 29, 0.98) 0%, 
          rgba(153, 27, 27, 0.98) 50%,
          rgba(185, 28, 28, 0.98) 100%);
        backdrop-filter: blur(25px);
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
      }

      #mobile-menu::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, 
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent);
      }

      /* Mobile Menu Items */
      .mobile-nav-item {
        position: relative;
        margin: 4px 8px;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
      }

      .mobile-nav-item:hover {
        background: rgba(255, 255, 255, 0.15);
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
      }

      .mobile-nav-item::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(255, 255, 255, 0.1), 
          transparent);
        transition: left 0.6s ease;
      }

      .mobile-nav-item:hover::before {
        left: 100%;
      }

      .mobile-nav-link {
        display: block;
        padding: 16px 20px;
        color: white;
        text-decoration: none;
        font-weight: 500;
        position: relative;
        z-index: 1;
        transition: all 0.3s ease;
      }

      .mobile-nav-link:hover {
        color: #F0F0E6;
        transform: translateX(4px);
      }

      /* Mobile Search Container */
      .mobile-search-container {
        margin: 16px 8px 8px 8px;
        padding: 20px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 16px;
        backdrop-filter: blur(15px);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      }

      .mobile-search-input {
        width: 100%;
        padding: 14px 50px 14px 20px;
        background: rgba(255, 255, 255, 0.9);
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 12px;
        color: #374151;
        font-size: 16px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        outline: none;
      }

      .mobile-search-input:focus {
        background: white;
        border-color: #8B4513;
        box-shadow: 0 0 0 4px rgba(139, 69, 19, 0.1);
        transform: scale(1.02);
      }

      .mobile-search-input::placeholder {
        color: #6b7280;
        font-weight: 400;
      }

      .mobile-search-btn {
        position: absolute;
        right: 32px;
        top: 50%;
        transform: translateY(-50%);
        width: 36px;
        height: 36px;
        background: linear-gradient(135deg, #8B4513, #654321);
        border: none;
        border-radius: 8px;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
      }

      .mobile-search-btn:hover {
        transform: translateY(-50%) scale(1.1);
        box-shadow: 0 4px 15px rgba(220, 38, 38, 0.4);
      }

      .mobile-search-btn:active {
        transform: translateY(-50%) scale(0.95);
      }

      /* Premium Footer Enhancements */
      footer {
        background: linear-gradient(135deg, 
          rgba(87, 13, 13, 0.98) 0%,
          rgba(127, 29, 29, 0.98) 15%,
          rgba(153, 27, 27, 0.98) 35%,
          rgba(185, 28, 28, 0.98) 50%,
          rgba(153, 27, 27, 0.98) 65%,
          rgba(127, 29, 29, 0.98) 85%,
          rgba(87, 13, 13, 0.98) 100%);
        backdrop-filter: blur(30px) saturate(1.5);
        border-top: 2px solid rgba(255, 255, 255, 0.15);
        position: relative;
        overflow: hidden;
        box-shadow: 
          0 -20px 60px rgba(0, 0, 0, 0.2),
          0 -8px 32px rgba(153, 27, 27, 0.1),
          0 1px 0 rgba(255, 255, 255, 0.1) inset;
      }

      footer::before {
        content: '';
        position: absolute;
        top: 0;
        left: -200%;
        width: 400%;
        height: 3px;
        background: linear-gradient(90deg, 
          transparent 0%, 
          rgba(255, 120, 120, 0.3) 25%,
          rgba(255, 255, 255, 0.4) 50%,
          rgba(255, 120, 120, 0.3) 75%,
          transparent 100%);
        animation: shimmer 5s infinite ease-in-out;
        z-index: 1;
      }

      footer::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: 
          radial-gradient(circle at 15% 15%, rgba(255, 255, 255, 0.08) 0%, transparent 50%),
          radial-gradient(circle at 85% 85%, rgba(255, 120, 120, 0.08) 0%, transparent 50%),
          radial-gradient(circle at 50% 50%, rgba(255, 200, 200, 0.04) 0%, transparent 60%);
        pointer-events: none;
        z-index: 0;
      }

      .footer-container {
        position: relative;
        z-index: 2;
      }

      .footer-section {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 16px;
        padding: 32px 24px;
        backdrop-filter: blur(10px);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .footer-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(255, 255, 255, 0.05), 
          transparent);
        transition: left 0.8s ease;
      }

      .footer-section:hover::before {
        left: 100%;
      }

      .footer-section:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.15);
        transform: translateY(-4px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
      }

      .footer-title {
        color: #F0F0E6;
        font-weight: 800;
        font-size: 1.375rem;
        margin-bottom: 24px;
        position: relative;
        text-shadow: 0 2px 8px rgba(252, 165, 165, 0.3);
      }

      .footer-title::after {
        content: '';
        position: absolute;
        bottom: -8px;
        left: 0;
        width: 40px;
        height: 3px;
        background: linear-gradient(90deg, #A0522D, #8B4513, #A0522D);
        border-radius: 2px;
        animation: gradientShift 2s ease-in-out infinite;
      }

      /* Ultra-Premium Social Media Icons */
      .social-icon {
        position: relative;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 48px;
        height: 48px;
        background: linear-gradient(135deg, 
          rgba(255, 255, 255, 0.1) 0%, 
          rgba(255, 120, 120, 0.1) 50%, 
          rgba(255, 255, 255, 0.1) 100%);
        border: 2px solid rgba(255, 255, 255, 0.15);
        border-radius: 50%;
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
        backdrop-filter: blur(15px);
        box-shadow: 
          0 4px 20px rgba(0, 0, 0, 0.2),
          0 1px 0 rgba(255, 255, 255, 0.1) inset;
      }

      .social-icon::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, 
          transparent 30%, 
          rgba(255, 255, 255, 0.1) 50%, 
          transparent 70%);
        transform: rotate(-45deg);
        transition: transform 0.8s ease;
        opacity: 0;
      }

      .social-icon::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 0%, transparent 70%);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .social-icon:hover::before {
        transform: rotate(-45deg) translateX(100%);
        opacity: 1;
      }

      .social-icon:hover::after {
        width: 60px;
        height: 60px;
      }

      .social-icon:hover {
        transform: translateY(-6px) scale(1.15) rotate(5deg);
        background: linear-gradient(135deg, 
          rgba(255, 255, 255, 0.2) 0%, 
          rgba(255, 120, 120, 0.2) 50%, 
          rgba(255, 255, 255, 0.2) 100%);
        border-color: rgba(255, 255, 255, 0.3);
        box-shadow: 
          0 15px 50px rgba(0, 0, 0, 0.4),
          0 8px 25px rgba(255, 120, 120, 0.2),
          0 0 0 8px rgba(255, 255, 255, 0.05);
      }

      .social-icon i {
        font-size: 1.25rem;
        transition: all 0.4s ease;
        z-index: 1;
      }

      .social-icon:hover i {
        color: #ffffff;
        text-shadow: 0 2px 8px rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
      }

      /* Sticky Navigation Styles */
      .sticky-nav {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 9999;
        background: linear-gradient(135deg, 
          rgba(139, 69, 19, 0.98) 0%,
          rgba(101, 67, 33, 0.98) 50%,
          rgba(83, 53, 10, 0.98) 100%);
        backdrop-filter: blur(20px) saturate(1.2);
        border-bottom: 2px solid rgba(255, 255, 255, 0.15);
        box-shadow: 
          0 8px 32px rgba(0, 0, 0, 0.2),
          0 4px 16px rgba(139, 69, 19, 0.15);
        transform: translateY(-100%);
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .sticky-nav.show {
        transform: translateY(0);
      }
      
      .sticky-nav nav {
        padding: 12px 0;
      }
      
      .sticky-nav .nav-link {
        padding: 10px 16px;
        font-weight: 500;
        border-radius: 8px;
        transition: all 0.2s ease;
      }
      
      .sticky-nav .nav-link:hover {
        background: rgba(255, 255, 255, 0.1);
        transform: translateY(-2px);
      }
      
      /* Header sections visibility control */
      .header-section {
        transition: opacity 0.3s ease, transform 0.3s ease;
      }
      
      .header-section.hide-on-scroll {
        opacity: 0;
        transform: translateY(-10px);
        pointer-events: none;
      }

      /* Enhanced Footer Links */
      .footer-link {
        color: #F0F0E6;
        text-decoration: none;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        padding: 8px 0;
        display: inline-block;
        overflow: hidden;
      }

      .footer-link::before {
        content: '';
        position: absolute;
        bottom: 0;
        left: -100%;
        width: 100%;
        height: 2px;
        background: linear-gradient(90deg, transparent, #ffffff, transparent);
        transition: left 0.6s ease;
      }

      .footer-link::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 0;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
        transition: width 0.4s ease;
      }

      .footer-link:hover::before {
        left: 100%;
      }

      .footer-link:hover::after {
        width: 100%;
      }

      .footer-link:hover {
        color: #ffffff;
        transform: translateX(8px) scale(1.02);
        text-shadow: 0 2px 8px rgba(255, 255, 255, 0.3);
      }

      /* Ultra-Premium Newsletter Form */
      .newsletter-container {
        background: rgba(255, 255, 255, 0.05);
        border: 2px solid rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        padding: 24px;
        backdrop-filter: blur(15px);
        box-shadow: 
          0 8px 40px rgba(0, 0, 0, 0.2),
          0 1px 0 rgba(255, 255, 255, 0.1) inset;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .newsletter-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, 
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent);
        animation: shimmer 3s infinite;
      }

      .newsletter-container:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
        box-shadow: 
          0 12px 50px rgba(0, 0, 0, 0.3),
          0 4px 20px rgba(255, 120, 120, 0.1);
      }

      .newsletter-input {
        background: rgba(255, 255, 255, 0.15);
        border: 2px solid rgba(255, 255, 255, 0.2);
        color: white;
        padding: 16px 20px;
        border-radius: 14px;
        font-size: 15px;
        font-weight: 500;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      .newsletter-input:focus {
        background: rgba(255, 255, 255, 0.25);
        border-color: rgba(255, 255, 255, 0.4);
        box-shadow: 
          0 0 0 4px rgba(255, 255, 255, 0.1),
          0 8px 30px rgba(0, 0, 0, 0.2);
        transform: scale(1.02);
      }

      .newsletter-input::placeholder {
        color: rgba(255, 255, 255, 0.7);
        font-weight: 400;
      }

      .newsletter-btn {
        background: linear-gradient(135deg, 
          #8B4513 0%, 
          #A0522D 25%, 
          #654321 50%, 
          #A0522D 75%, 
          #8B4513 100%);
        background-size: 200% 200%;
        padding: 16px 32px;
        border-radius: 14px;
        font-weight: 700;
        font-size: 15px;
        letter-spacing: 0.5px;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        border: 2px solid rgba(255, 255, 255, 0.2);
        box-shadow: 
          0 6px 25px rgba(220, 38, 38, 0.3),
          0 2px 10px rgba(0, 0, 0, 0.2);
      }

      .newsletter-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(255, 255, 255, 0.3), 
          transparent);
        transition: left 0.8s ease;
      }

      .newsletter-btn:hover::before {
        left: 100%;
      }

      .newsletter-btn:hover {
        background-position: 100% 100%;
        transform: translateY(-3px) scale(1.05);
        box-shadow: 
          0 12px 40px rgba(220, 38, 38, 0.5),
          0 8px 25px rgba(0, 0, 0, 0.3),
          0 0 0 6px rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.4);
      }

      .newsletter-btn:active {
        transform: translateY(-1px) scale(1.02);
        transition-duration: 0.1s;
      }

      /* Newsletter Animation Styles */
      @keyframes slideInFromRight {
        from {
          opacity: 0;
          transform: translateX(100px) scale(0.8);
        }
        to {
          opacity: 1;
          transform: translateX(0) scale(1);
        }
      }
      
      @keyframes slideOutToRight {
        from {
          opacity: 1;
          transform: translateX(0) scale(1);
        }
        to {
          opacity: 0;
          transform: translateX(100px) scale(0.8);
        }
      }
      
      @keyframes bounceIn {
        0% {
          opacity: 0;
          transform: scale(0.3) rotate(-10deg);
        }
        50% {
          opacity: 1;
          transform: scale(1.1) rotate(5deg);
        }
        100% {
          opacity: 1;
          transform: scale(1) rotate(0deg);
        }
      }
      
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }
      
      .newsletter-notification {
        :root {
            --primary-brown: #92400e;
            --primary-brown-dark: #78350f;
            --primary-brown-light: #d97706;
            --cream: #fef3c7;
            --cream-dark: #fde68a;
            --black: #1f2937;
        }
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        max-width: 400px;
        padding: 20px 24px;
        border-radius: 16px;
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        animation: slideInFromRight 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        font-family: 'Inter', sans-serif;
        font-weight: 500;
      }
      
      .newsletter-notification.success {
        background: linear-gradient(135deg, rgba(16, 185, 129, 0.95), rgba(5, 150, 105, 0.95));
        color: white;
        border-color: rgba(255, 255, 255, 0.3);
      }
      
      .newsletter-notification.error {
        background: linear-gradient(135deg, rgba(239, 68, 68, 0.95), rgba(220, 38, 38, 0.95));
        color: white;
        border-color: rgba(255, 255, 255, 0.3);
      }
      
      .newsletter-notification.hide {
        animation: slideOutToRight 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
      }
      
      .newsletter-notification .icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        margin-right: 12px;
        animation: bounceIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.2s both;
      }
      
      .newsletter-notification .close-btn {
        position: absolute;
        top: 8px;
        right: 8px;
        width: 24px;
        height: 24px;
        border: none;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        font-size: 12px;
      }
      
      .newsletter-notification .close-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
      }
      
      .newsletter-form-loading {
        position: relative;
        pointer-events: none;
      }
      
      .newsletter-form-loading .newsletter-btn {
        background: #9ca3af !important;
        cursor: not-allowed;
      }
      
      .newsletter-form-loading .newsletter-input {
        opacity: 0.7;
      }
      
      .newsletter-loading-spinner {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 20px;
        height: 20px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-top: 2px solid white;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      
      @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
      }
      
      .newsletter-input.error {
        border-color: #8B4513 !important;
        animation: shake 0.5s ease-in-out;
        box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.2);
      }
      
      .newsletter-input.success {
        border-color: #10b981 !important;
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
      }

      /* Enhanced Body Background */
      body {
        background: linear-gradient(135deg, 
          #F5F5DC 0%, 
          #F0F0E6 25%, 
          #E8E8DC 50%, 
          #F0F0E6 75%, 
          #F5F5DC 100%);
        min-height: 100vh;
        position: relative;
        color: #000000;
      }

      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
          radial-gradient(circle at 20% 80%, rgba(139, 69, 19, 0.05) 0%, transparent 50%),
          radial-gradient(circle at 80% 20%, rgba(139, 69, 19, 0.1) 0%, transparent 50%);
        pointer-events: none;
        z-index: -1;
      }

      /* Responsive Enhancements */
      @media (max-width: 768px) {
        .mobile-search-container {
          margin: 12px 4px 8px 4px;
          padding: 16px;
        }

        .mobile-search-input {
          padding: 12px 45px 12px 16px;
          font-size: 15px;
        }

        .mobile-search-btn {
          right: 20px;
          width: 32px;
          height: 32px;
        }

        .mobile-nav-item {
          margin: 3px 4px;
        }

        .mobile-nav-link {
          padding: 14px 16px;
          font-size: 16px;
        }

        .search-input {
          background: rgba(255, 255, 255, 0.9);
          color: #374151;
        }

        .search-input::placeholder {
          color: #6b7280;
        }
      }

      /* Loading Animation */
      .loading-pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }

      /* Enhanced Add to Cart Animations */
      @keyframes cartBounce {
        0% { transform: scale(1); }
        25% { transform: scale(1.2) rotate(5deg); }
        50% { transform: scale(1.1) rotate(-3deg); }
        75% { transform: scale(1.15) rotate(2deg); }
        100% { transform: scale(1) rotate(0deg); }
      }

      @keyframes cartPulse {
        0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
        50% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
        100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
      }

      @keyframes buttonSuccess {
        0% { background: linear-gradient(135deg, #8B4513, #654321); transform: scale(1); }
        25% { background: linear-gradient(135deg, #10b981, #059669); transform: scale(1.05); }
        50% { background: linear-gradient(135deg, #10b981, #059669); transform: scale(1.1); }
        75% { background: linear-gradient(135deg, #10b981, #059669); transform: scale(1.05); }
        100% { background: linear-gradient(135deg, #8B4513, #654321); transform: scale(1); }
      }

      @keyframes flyToCart {
        0% {
          transform: scale(1) translate(0, 0);
          opacity: 1;
        }
        50% {
          transform: scale(0.8) translate(50px, -30px);
          opacity: 0.8;
        }
        100% {
          transform: scale(0.3) translate(200px, -100px);
          opacity: 0;
        }
      }

      @keyframes sparkle {
        0%, 100% {
          opacity: 0;
          transform: scale(0) rotate(0deg);
        }
        50% {
          opacity: 1;
          transform: scale(1) rotate(180deg);
        }
      }

      @keyframes countBounce {
        0% { transform: scale(1); }
        50% { transform: scale(1.5); }
        100% { transform: scale(1); }
      }

      .cart-animate {
        animation: cartBounce 0.6s ease-out;
      }

      .cart-pulse {
        animation: cartPulse 0.8s ease-out;
      }

      .button-success {
        animation: buttonSuccess 1.2s ease-out;
      }

      .fly-to-cart {
        animation: flyToCart 0.8s ease-out forwards;
      }

      .sparkle-effect {
        position: absolute;
        width: 8px;
        height: 8px;
        background: linear-gradient(45deg, #fbbf24, #f59e0b);
        border-radius: 50%;
        pointer-events: none;
        animation: sparkle 1s ease-out forwards;
      }

      .count-bounce {
        animation: countBounce 0.4s ease-out;
      }

      /* Success notification enhancement */
      .cart-success-notification {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0);
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
        padding: 24px 32px;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(16, 185, 129, 0.3);
        z-index: 10000;
        display: flex;
        align-items: center;
        gap: 16px;
        font-weight: 600;
        font-size: 18px;
        backdrop-filter: blur(10px);
        border: 2px solid rgba(255, 255, 255, 0.2);
        animation: successPopup 2s ease-out forwards;
      }

      @keyframes successPopup {
        0% {
          transform: translate(-50%, -50%) scale(0) rotate(-10deg);
          opacity: 0;
        }
        20% {
          transform: translate(-50%, -50%) scale(1.1) rotate(5deg);
          opacity: 1;
        }
        40% {
          transform: translate(-50%, -50%) scale(0.95) rotate(-2deg);
          opacity: 1;
        }
        60% {
          transform: translate(-50%, -50%) scale(1.02) rotate(1deg);
          opacity: 1;
        }
        80% {
          transform: translate(-50%, -50%) scale(1) rotate(0deg);
          opacity: 1;
        }
        90% {
          transform: translate(-50%, -50%) scale(1) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translate(-50%, -50%) scale(0) rotate(0deg);
          opacity: 0;
        }
      }

      .success-icon {
        width: 32px;
        height: 32px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: iconSpin 0.6s ease-out;
      }

      @keyframes iconSpin {
        0% { transform: rotate(-180deg) scale(0); }
        50% { transform: rotate(0deg) scale(1.2); }
        100% { transform: rotate(0deg) scale(1); }
      }

      /* Smooth Scroll */
      html {
        scroll-behavior: smooth;
      }

      /* Page Transition Loader */
      .page-loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, 
          rgba(139, 69, 19, 0.95) 0%,
          rgba(101, 67, 33, 0.95) 50%,
          rgba(83, 53, 10, 0.95) 100%);
        backdrop-filter: blur(10px);
        z-index: 99999;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .page-loader.show {
        opacity: 1;
        visibility: visible;
      }

      .loader-content {
        text-align: center;
        color: white;
        transform: translateY(20px);
        transition: transform 0.4s ease;
      }

      .page-loader.show .loader-content {
        transform: translateY(0);
      }

      /* Spinning Logo Animation */
      .loader-logo {
        width: auto;
        height: 80px;
        margin: 0 auto 24px;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .loader-logo img {
        height: 80px;
        width: auto;
      }

      @keyframes logoSpin {
        0% { transform: rotate(0deg) scale(1); }
        50% { transform: rotate(180deg) scale(1.1); }
        100% { transform: rotate(360deg) scale(1); }
      }

      /* Loading Spinner */
      .loader-spinner {
        width: 60px;
        height: 60px;
        margin: 0 auto 24px;
        position: relative;
      }

      .spinner-ring {
        position: absolute;
        width: 100%;
        height: 100%;
        border: 3px solid transparent;
        border-top: 3px solid rgba(255, 255, 255, 0.8);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      .spinner-ring:nth-child(2) {
        width: 80%;
        height: 80%;
        top: 10%;
        left: 10%;
        border-top: 3px solid rgba(255, 120, 120, 0.6);
        animation: spin 1.5s linear infinite reverse;
      }

      .spinner-ring:nth-child(3) {
        width: 60%;
        height: 60%;
        top: 20%;
        left: 20%;
        border-top: 3px solid rgba(255, 200, 200, 0.4);
        animation: spin 2s linear infinite;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* Loading Text Animation */
      .loader-text {
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 12px;
        animation: textPulse 1.5s ease-in-out infinite;
      }

      .loader-subtext {
        font-size: 14px;
        color: rgba(255, 255, 255, 0.8);
        animation: textFade 2s ease-in-out infinite;
      }

      @keyframes textPulse {
        0%, 100% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.7; transform: scale(1.05); }
      }

      @keyframes textFade {
        0%, 100% { opacity: 0.8; }
        50% { opacity: 0.4; }
      }

      /* Progress Bar */
      .loader-progress {
        width: 200px;
        height: 4px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 2px;
        margin: 24px auto 0;
        overflow: hidden;
        position: relative;
      }

      .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, 
          rgba(255, 255, 255, 0.8) 0%,
          rgba(255, 120, 120, 0.9) 50%,
          rgba(255, 255, 255, 0.8) 100%);
        border-radius: 2px;
        animation: progressFill 1s ease-out forwards;
        transform: translateX(-100%);
      }

      @keyframes progressFill {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(0); }
      }

      /* Floating Particles */
      .loader-particles {
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
        pointer-events: none;
      }

      .particle {
        position: absolute;
        width: 4px;
        height: 4px;
        background: rgba(255, 255, 255, 0.6);
        border-radius: 50%;
        animation: float 3s ease-in-out infinite;
      }

      .particle:nth-child(1) { left: 10%; animation-delay: 0s; }
      .particle:nth-child(2) { left: 20%; animation-delay: 0.5s; }
      .particle:nth-child(3) { left: 30%; animation-delay: 1s; }
      .particle:nth-child(4) { left: 40%; animation-delay: 1.5s; }
      .particle:nth-child(5) { left: 50%; animation-delay: 2s; }
      .particle:nth-child(6) { left: 60%; animation-delay: 2.5s; }
      .particle:nth-child(7) { left: 70%; animation-delay: 3s; }
      .particle:nth-child(8) { left: 80%; animation-delay: 3.5s; }
      .particle:nth-child(9) { left: 90%; animation-delay: 4s; }

      @keyframes float {
        0%, 100% {
          transform: translateY(100vh) scale(0);
          opacity: 0;
        }
        10% {
          opacity: 1;
          transform: translateY(90vh) scale(1);
        }
        90% {
          opacity: 1;
          transform: translateY(10vh) scale(1);
        }
        100% {
          opacity: 0;
          transform: translateY(0vh) scale(0);
        }
      }

      /* Modern Message Animations */
      @keyframes progressBar {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(0); }
      }

      @keyframes messageSlideIn {
        0% {
          transform: translateX(100%) scale(0.8);
          opacity: 0;
        }
        50% {
          transform: translateX(-10px) scale(1.05);
          opacity: 0.8;
        }
        100% {
          transform: translateX(0) scale(1);
          opacity: 1;
        }
      }

      @keyframes messageSlideOut {
        0% {
          transform: translateX(0) scale(1);
          opacity: 1;
        }
        100% {
          transform: translateX(100%) scale(0.8);
          opacity: 0;
        }
      }

      @keyframes iconBounce {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.2); }
      }

      /* Enhanced message toast styles */
      .message-toast {
        animation: messageSlideIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
      }

      .message-toast.dismissing {
        animation: messageSlideOut 0.4s cubic-bezier(0.4, 0, 1, 1) forwards;
      }

      .message-toast .icon-container {
        animation: iconBounce 0.6s ease-in-out;
      }
    </style>
</head>
<body class="font-sans bg-gray-50 text-gray-800"
      data-is-authenticated="{{ user.is_authenticated|yesno:'true,false' }}"
      {% if user.is_authenticated %}data-username="{{ user.username }}"{% endif %}
>
    <!-- Page Transition Loader -->
    <div id="page-loader" class="page-loader">
      <div class="loader-particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
      </div>
      <div class="loader-content">
        <div class="loader-logo">
          <img src="{% static 'timelesscart-logo.png' %}" alt="Loading..." />
        </div>
        <div class="loader-spinner">
          <div class="spinner-ring"></div>
          <div class="spinner-ring"></div>
          <div class="spinner-ring"></div>
        </div>
        <div class="loader-text">Loading...</div>
        <div class="loader-subtext">Preparing your experience</div>
        <div class="loader-progress">
          <div class="progress-bar"></div>
        </div>
      </div>
    </div>

    <!-- Sticky Navigation (hidden by default) -->
    <div id="sticky-nav" class="sticky-nav">
      <div class="container mx-auto px-4">
        <nav class="flex items-center justify-center space-x-8">
          <a href="/" class="nav-link px-4 py-2 rounded-lg font-medium text-white hover:text-amber-100">
            <i class="fas fa-home mr-2"></i>Home
          </a>
          <a href="{% url 'products:product_list' %}" class="nav-link px-4 py-2 rounded-lg font-medium text-white hover:text-amber-100">
            <i class="fas fa-gem mr-2"></i>Products
          </a>
          <a href="/contact/" class="nav-link px-4 py-2 rounded-lg font-medium text-white hover:text-amber-100">
            <i class="fas fa-envelope mr-2"></i>Contact
          </a>
          <a href="/blog/" class="nav-link px-4 py-2 rounded-lg font-medium text-white hover:text-amber-100">
            <i class="fas fa-blog mr-2"></i>Blog
          </a>
        </nav>
      </div>
    </div>

    <header id="main-header" class="header-gradient text-white shadow-2xl transition-all duration-300">

      <!-- Main Header -->
      <div class="container mx-auto px-4 py-3" style="overflow: visible; background: rgba(139, 69, 19, 0.2); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(139, 69, 19, 0.3);">
        <div class="grid grid-cols-12 gap-4 items-center" style="overflow: visible;">
          <!-- Logo Section -->
          <div id="logo-section" class="header-section col-span-12 md:col-span-3 flex justify-center md:justify-start">
            <a href="/" class="flex items-center md:items-start logo-container transition-transform group">
              <img src="{% static 'timelesscart-logo.png' %}" alt="Timeless Cart Logo" class="h-12 w-auto mr-3 transition-all duration-300" />
              <div class="text-left">
                <div class="logo-text text-lg font-black tracking-wider" style="color: #FEFEFE; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);">oraagh</div>
                <div class="text-xs font-medium" style="color: #F0F0E6;">Premium woolen Collection</div>
              </div>
            </a>
          </div>

          <!-- Search Section -->
          <div id="search-section" class="header-section col-span-12 md:col-span-6 order-3 md:order-2">
            <form action="/search/" method="GET" class="relative search-container max-w-lg mx-auto" onsubmit="showLoading(this)">
              <div class="relative">
                <input type="text" name="q" placeholder="Search for shawls, scarves, wraps..." 
                       class="w-full px-4 py-3 pr-12 rounded-xl text-sm border-2 transition-all duration-300 focus:outline-none" style="background: #F5F5DC; color: #000000; border-color: rgba(139, 69, 19, 0.3);" onfocus="this.style.borderColor='#8B4513'; this.style.background='#FEFEFE'; this.style.boxShadow='0 0 0 3px rgba(139, 69, 19, 0.2)';" onblur="this.style.borderColor='rgba(139, 69, 19, 0.3)'; this.style.background='#F5F5DC'; this.style.boxShadow='none';">
                <button type="submit" class="absolute right-1 top-1/2 transform -translate-y-1/2 p-2 rounded-lg transition-all duration-200 group" style="background: #8B4513; color: #FEFEFE;" onmouseover="this.style.background='#654321'" onmouseout="this.style.background='#8B4513'">
                  <svg class="w-5 h-5 search-icon group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                  </svg>
                  <svg class="w-5 h-5 loading-icon hidden animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                  </svg>
                </button>
              </div>
            </form>
          </div>

          <!-- Actions Section -->
          <div id="actions-section" class="header-section col-span-12 md:col-span-3 order-2 md:order-3 flex justify-center md:justify-end" style="overflow: visible;">
            <div class="flex items-center space-x-4">
              <!-- Cart -->
              <a href="{% url 'orders:cart' %}" class="relative group">
                <div class="p-3 rounded-xl transition-all duration-200 border" style="background: rgba(139, 69, 19, 0.2); border-color: rgba(139, 69, 19, 0.3);" onmouseover="this.style.background='rgba(139, 69, 19, 0.3)'; this.style.borderColor='rgba(139, 69, 19, 0.5)'" onmouseout="this.style.background='rgba(139, 69, 19, 0.2)'; this.style.borderColor='rgba(139, 69, 19, 0.3)'">
                  <svg class="w-6 h-6 text-white group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m0 0h8"></path>
                  </svg>
                  <span class="cart-count absolute -top-2 -right-2 text-xs rounded-full h-6 w-6 flex items-center justify-center font-bold shadow-lg" style="background: #8B4513; color: #FEFEFE;">{{ cart_count }}</span>
                </div>
              </a>
              
              <!-- User Account -->
              {% if user.is_authenticated %}
                <div class="relative" style="position: static;">
                  <button id="profile-dropdown-btn" class="group p-3 rounded-xl transition-all duration-200 border focus:outline-none" style="background: rgba(139, 69, 19, 0.2); border-color: rgba(139, 69, 19, 0.3);" onmouseover="this.style.background='rgba(139, 69, 19, 0.3)'; this.style.borderColor='rgba(139, 69, 19, 0.5)'" onmouseout="this.style.background='rgba(139, 69, 19, 0.2)'; this.style.borderColor='rgba(139, 69, 19, 0.3)'">
                    <div class="flex items-center space-x-2">
                      <svg class="w-6 h-6 text-white group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                      </svg>
                      <svg class="w-4 h-4 text-white transition-transform duration-200" id="profile-dropdown-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                    </div>
                  </button>
                  <div id="profile-dropdown" class="absolute right-0 top-full mt-2 w-56 rounded-xl shadow-2xl py-2 z-[9999] opacity-0 invisible transform scale-95 transition-all duration-200 border" style="background: #F5F5DC; border-color: rgba(139, 69, 19, 0.2); position: absolute !important; z-index: 99999 !important;">
                    <div class="px-4 py-3 border-b" style="border-color: rgba(139, 69, 19, 0.1);">
                      <p class="text-sm font-medium" style="color: #000000;">{{ user.username }}</p>
                      <p class="text-xs" style="color: rgba(0, 0, 0, 0.6);">{{ user.email }}</p>
                    </div>
                    <a href="{% url 'accounts:profile' %}" class="block px-4 py-3 text-sm transition-colors" style="color: #000000;" onmouseover="this.style.background='rgba(139, 69, 19, 0.1)'; this.style.color='#8B4513'" onmouseout="this.style.background='transparent'; this.style.color='#000000'">
                      <i class="fas fa-user mr-3 w-4"></i>My Profile
                    </a>
                    <a href="{% url 'accounts:order_history' %}" class="block px-4 py-3 text-sm transition-colors" style="color: #000000;" onmouseover="this.style.background='rgba(139, 69, 19, 0.1)'; this.style.color='#8B4513'" onmouseout="this.style.background='transparent'; this.style.color='#000000'">
                      <i class="fas fa-history mr-3 w-4"></i>Order History
                    </a>
                    <a href="{% url 'orders:cart' %}" class="block px-4 py-3 text-sm transition-colors" style="color: #000000;" onmouseover="this.style.background='rgba(139, 69, 19, 0.1)'; this.style.color='#8B4513'" onmouseout="this.style.background='transparent'; this.style.color='#000000'">
                      <i class="fas fa-shopping-cart mr-3 w-4"></i>My Cart
                    </a>
                    <hr class="my-2" style="border-color: rgba(139, 69, 19, 0.2);">
                    <a href="{% url 'accounts:logout' %}" class="block px-4 py-3 text-sm transition-colors font-medium" style="color: #8B4513;" onmouseover="this.style.background='rgba(139, 69, 19, 0.1)'" onmouseout="this.style.background='transparent'">
                      <i class="fas fa-sign-out-alt mr-3 w-4"></i>Logout
                    </a>
                  </div>
                </div>
              {% else %}
                <a href="{% url 'accounts:login' %}" class="group p-3 rounded-xl transition-all duration-200 border" style="background: rgba(139, 69, 19, 0.2); border-color: rgba(139, 69, 19, 0.3);" onmouseover="this.style.background='rgba(139, 69, 19, 0.3)'; this.style.borderColor='rgba(139, 69, 19, 0.5)'" onmouseout="this.style.background='rgba(139, 69, 19, 0.2)'; this.style.borderColor='rgba(139, 69, 19, 0.3)'">
                  <svg class="w-6 h-6 text-white group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
                  </svg>
                </a>
              {% endif %}

              <!-- Mobile Menu Toggle -->
              <div class="md:hidden">
                <button id="mobile-menu-toggle" class="mobile-menu-toggle p-3 rounded-xl transition-all duration-200 border focus:outline-none" style="background: rgba(139, 69, 19, 0.2); border-color: rgba(139, 69, 19, 0.3);" onmouseover="this.style.background='rgba(139, 69, 19, 0.3)'; this.style.borderColor='rgba(139, 69, 19, 0.5)'" onmouseout="this.style.background='rgba(139, 69, 19, 0.2)'; this.style.borderColor='rgba(139, 69, 19, 0.3)'">
                  <span class="hamburger-line"></span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Navigation Bar -->
      <div class="border-t bg-opacity-20" style="border-color: rgba(139, 69, 19, 0.2); background: rgba(139, 69, 19, 0.2);">
        <div class="container mx-auto px-4">
          <nav class="hidden md:flex items-center justify-center space-x-8 py-2">
            <a href="/" class="nav-link px-4 py-2 rounded-lg font-medium transition-all duration-200" style="color: #FEFEFE;" onmouseover="this.style.background='rgba(139, 69, 19, 0.2)'; this.style.color='#F5F5DC'" onmouseout="this.style.background='transparent'; this.style.color='#FEFEFE'">
              <i class="fas fa-home mr-2"></i>Home
            </a>
            <a href="{% url 'products:product_list' %}" class="nav-link px-4 py-2 rounded-lg font-medium transition-all duration-200" style="color: #FEFEFE;" onmouseover="this.style.background='rgba(139, 69, 19, 0.2)'; this.style.color='#F5F5DC'" onmouseout="this.style.background='transparent'; this.style.color='#FEFEFE'">
              <i class="fas fa-gem mr-2"></i>Products
            </a>
            <a href="/contact/" class="nav-link px-4 py-2 rounded-lg font-medium transition-all duration-200" style="color: #FEFEFE;" onmouseover="this.style.background='rgba(139, 69, 19, 0.2)'; this.style.color='#F5F5DC'" onmouseout="this.style.background='transparent'; this.style.color='#FEFEFE'">
              <i class="fas fa-envelope mr-2"></i>Contact
            </a>
            <a href="/blog/" class="nav-link px-4 py-2 rounded-lg font-medium transition-all duration-200" style="color: #FEFEFE;" onmouseover="this.style.background='rgba(139, 69, 19, 0.2)'; this.style.color='#F5F5DC'" onmouseout="this.style.background='transparent'; this.style.color='#FEFEFE'">
              <i class="fas fa-blog mr-2"></i>Blog
            </a>
          </nav>
        </div>
      </div>
      <div id="mobile-menu" class="md:hidden max-h-0 overflow-hidden transition-all duration-500 ease-in-out shadow-inner">
        <div class="container mx-auto px-4 py-6">
          <!-- Mobile Search Bar -->
          <div class="mobile-search-container transform transition-all duration-300 ease-in-out opacity-0" id="mobile-search-container">
            <form action="/search/" method="GET" class="relative" onsubmit="showLoading(this)">
              <input type="text" name="q" placeholder="Search for shawls, scarves, wraps..." class="mobile-search-input" style="background: rgba(245, 245, 220, 0.9); color: #000000;">
              <button type="submit" class="mobile-search-btn">
                <svg class="w-5 h-5 search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
                <svg class="w-5 h-5 loading-icon hidden animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                </svg>
              </button>
            </form>
          </div>
          
          <!-- Mobile Navigation Links -->
          <div class="space-y-2 mt-4">
            <div class="mobile-nav-item">
              <a href="/" class="mobile-nav-link">
                <i class="fas fa-home mr-3"></i>Home
              </a>
            </div>
            <div class="mobile-nav-item">
              <a href="{% url 'products:product_list' %}" class="mobile-nav-link">
                <i class="fas fa-gem mr-3"></i>Products
              </a>
            </div>
            <div class="mobile-nav-item">
              <a href="/contact/" class="mobile-nav-link">
                <i class="fas fa-envelope mr-3"></i>Contact
              </a>
            </div>
            <div class="mobile-nav-item">
              <a href="/blog/" class="mobile-nav-link">
                <i class="fas fa-blog mr-3"></i>Blog
              </a>
            </div>
            <div class="mobile-nav-item">
              <a href="{% url 'orders:cart' %}" class="mobile-nav-link">
                <i class="fas fa-shopping-cart mr-3"></i>Cart
                {% if cart_count > 0 %}
                  <span class="mobile-cart-badge ml-2 text-xs rounded-full px-2 py-1" style="background: #8B4513; color: #FEFEFE;">{{ cart_count }}</span>
                {% endif %}
              </a>
            </div>
            {% if user.is_authenticated %}
              <div class="mobile-nav-item">
                <a href="{% url 'accounts:profile' %}" class="mobile-nav-link">
                  <i class="fas fa-user mr-3"></i>Profile
                </a>
              </div>
              <div class="mobile-nav-item">
                <a href="{% url 'accounts:order_history' %}" class="mobile-nav-link">
                  <i class="fas fa-history mr-3"></i>Order History
                </a>
              </div>
              <div class="mobile-nav-item">
                <a href="{% url 'accounts:logout' %}" class="mobile-nav-link">
                  <i class="fas fa-sign-out-alt mr-3"></i>Logout
                </a>
              </div>
            {% else %}
              <div class="mobile-nav-item">
                <a href="{% url 'accounts:login' %}" class="mobile-nav-link">
                  <i class="fas fa-sign-in-alt mr-3"></i>Login
                </a>
              </div>
              <div class="mobile-nav-item">
                <a href="{% url 'accounts:signup' %}" class="mobile-nav-link">
                  <i class="fas fa-user-plus mr-3"></i>Sign Up
                </a>
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </header>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        const mobileMenuToggle = document.getElementById("mobile-menu-toggle");
        const mobileMenu = document.getElementById("mobile-menu");
        const mobileSearchContainer = document.getElementById("mobile-search-container");
        let isMenuOpen = false;

        mobileMenuToggle.addEventListener("click", function() {
          isMenuOpen = !isMenuOpen;
          
          if (isMenuOpen) {
            // Open menu
            mobileMenu.classList.remove("max-h-0");
            mobileMenu.classList.add("max-h-96");
            mobileMenu.style.overflowY = "auto";
            mobileMenuToggle.classList.add("menu-open");
            
            // Show search with delay
            setTimeout(() => {
              mobileSearchContainer.classList.remove("opacity-0");
              mobileSearchContainer.classList.add("opacity-100");
            }, 200);
          } else {
            // Close menu
            mobileMenu.classList.remove("max-h-96");
            mobileMenu.classList.add("max-h-0");
            mobileMenu.style.overflowY = "hidden";
            mobileMenuToggle.classList.remove("menu-open");
            mobileSearchContainer.classList.remove("opacity-100");
            mobileSearchContainer.classList.add("opacity-0");
          }
        });

        function showLoading(form) {
          const searchIcons = form.querySelectorAll(".search-icon");
          const loadingIcons = form.querySelectorAll(".loading-icon");
          const submitButtons = form.querySelectorAll("button[type='submit']");
          searchIcons.forEach(icon => icon.style.display = "none");
          loadingIcons.forEach(icon => icon.style.display = "block");
          submitButtons.forEach(button => button.disabled = true);
          setTimeout(() => {
            searchIcons.forEach(icon => icon.style.display = "block");
            loadingIcons.forEach(icon => icon.style.display = "none");
            submitButtons.forEach(button => button.disabled = false);
          }, 3000);
        }

        document.querySelectorAll("form[action='/search/']").forEach(form => {
          form.addEventListener("submit", function(e) {
            if (!e.defaultPrevented) {
              showLoading(this);
            }
          });
        });
        
        // Completely isolate verification forms from any global handlers
        document.querySelectorAll("form[action*='verify-email']").forEach(form => {
          // Remove all existing event listeners
          const newForm = form.cloneNode(true);
          form.parentNode.replaceChild(newForm, form);
          
          // Add only the specific handler we need
          newForm.addEventListener("submit", function(e) {
            console.log("Verification form submitted");
            // Let it submit normally - don't prevent or interfere
          });
        });

        // Sticky Navigation Scroll Detection
        const stickyNav = document.getElementById('sticky-nav');
        const mainHeader = document.getElementById('main-header');
        const logoSection = document.getElementById('logo-section');
        const searchSection = document.getElementById('search-section');
        const actionsSection = document.getElementById('actions-section');
        
        let lastScrollTop = 0;
        let headerHeight = mainHeader.offsetHeight;
        
        function handleScroll() {
          const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
          
          // Show sticky nav when scrolled down past header
          if (scrollTop > headerHeight) {
            stickyNav.classList.add('show');
            
            // Hide header sections when scrolled
            logoSection.classList.add('hide-on-scroll');
            searchSection.classList.add('hide-on-scroll');
            actionsSection.classList.add('hide-on-scroll');
          } else {
            stickyNav.classList.remove('show');
            
            // Show header sections when at top
            logoSection.classList.remove('hide-on-scroll');
            searchSection.classList.remove('hide-on-scroll');
            actionsSection.classList.remove('hide-on-scroll');
          }
          
          lastScrollTop = scrollTop;
        }
        
        // Throttle scroll events for better performance
        let ticking = false;
        function requestTick() {
          if (!ticking) {
            requestAnimationFrame(handleScroll);
            ticking = true;
            setTimeout(() => { ticking = false; }, 16); // ~60fps
          }
        }
        
        window.addEventListener('scroll', requestTick);
        
        // Recalculate header height on resize
        window.addEventListener('resize', () => {
          headerHeight = mainHeader.offsetHeight;
        });

        // Page Transition Loader
        const pageLoader = document.getElementById('page-loader');
        let isNavigating = false;

        function showLoader() {
          if (isNavigating) return;
          isNavigating = true;
          pageLoader.classList.add('show');
        }

        function hideLoader() {
          setTimeout(() => {
            pageLoader.classList.remove('show');
            isNavigating = false;
          }, 100);
        }

        // Handle all internal navigation links
        function handleNavigation(event) {
          const link = event.target.closest('a');
          if (!link) return;
          
          const href = link.getAttribute('href');
          
          // Skip if it's an external link, hash link, or has target="_blank"
          if (!href || 
              href.startsWith('http') || 
              href.startsWith('mailto:') || 
              href.startsWith('tel:') || 
              href.startsWith('#') ||
              link.getAttribute('target') === '_blank') {
            return;
          }
          
          // Skip if it's the current page
          if (href === window.location.pathname || 
              (href === '/' && window.location.pathname === '/')) {
            return;
          }
          
          event.preventDefault();
          showLoader();
          
          // Navigate after 1 second delay
          setTimeout(() => {
            window.location.href = href;
          }, 100);
        }

        // Add click listeners to all navigation elements
        document.addEventListener('click', handleNavigation);
        
        // Handle form submissions (like search)
        document.addEventListener('submit', function(event) {
          const form = event.target;
          const action = form.getAttribute('action');
          
          // Skip loader for add_to_cart forms and checkout forms
          if (action && (action.includes('add-to-cart') || form.id === 'checkout-form')) {
            return;
          }
          
          if (action && !form.getAttribute('target')) {
            showLoader();
            // Let the form submit naturally, loader will hide on page load
          }
        });
        
        // Hide loader when page loads
        window.addEventListener('load', hideLoader);
        
        // Hide loader if user navigates back/forward
        window.addEventListener('pageshow', hideLoader);

        // Django Messages Animation - Enhanced
        const messageToasts = document.querySelectorAll('.message-toast');
        messageToasts.forEach((toast, index) => {
          // Remove initial transform since CSS animation handles it
          setTimeout(() => {
            toast.style.transform = 'none';
          }, 100 + (index * 200));
          
          // Auto-dismiss after 6 seconds with staggered timing
          setTimeout(() => {
            dismissMessage(toast.querySelector('button'));
          }, 6000 + (index * 200));
        });
      });
      
      // Show loader immediately if page is loading
      if (document.readyState === 'loading') {
        document.getElementById('page-loader').classList.add('show');
      }

      // Enhanced Add to Cart Animation System
      function createSparkleEffect(element) {
        const rect = element.getBoundingClientRect();
        const sparkles = [];
        
        for (let i = 0; i < 8; i++) {
          const sparkle = document.createElement('div');
          sparkle.className = 'sparkle-effect';
          sparkle.style.left = (rect.left + Math.random() * rect.width) + 'px';
          sparkle.style.top = (rect.top + Math.random() * rect.height) + 'px';
          sparkle.style.animationDelay = (Math.random() * 0.5) + 's';
          document.body.appendChild(sparkle);
          sparkles.push(sparkle);
          
          setTimeout(() => sparkle.remove(), 1000);
        }
      }

      function animateCartIcon() {
        const cartIcons = document.querySelectorAll('a[href*="cart"] svg, a[href*="cart"] i');
        cartIcons.forEach(icon => {
          icon.closest('div, a').classList.add('cart-animate');
          setTimeout(() => {
            icon.closest('div, a').classList.remove('cart-animate');
          }, 600);
        });
      }

      function animateCartCount(newCount) {
        const cartCounts = document.querySelectorAll('.cart-count');
        cartCounts.forEach(count => {
          count.classList.add('count-bounce');
          count.textContent = newCount;
          setTimeout(() => {
            count.classList.remove('count-bounce');
          }, 400);
        });
      }

      function showCartSuccessNotification(productName) {
        // Remove any existing notifications
        const existing = document.querySelector('.cart-success-notification');
        if (existing) existing.remove();
        
        const notification = document.createElement('div');
        notification.className = 'cart-success-notification';
        notification.innerHTML = `
          <div class="success-icon">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <div>
            <div style="font-size: 16px; margin-bottom: 4px;">Added to Cart!</div>
            <div style="font-size: 14px; opacity: 0.9;">${productName}</div>
          </div>
        `;
        
        document.body.appendChild(notification);
        setTimeout(() => notification.remove(), 2000);
      }

      function handleAddToCartSuccess(form, productName, newCartCount) {
        const button = form.querySelector('button[type="submit"]');
        
        // Animate button
        button.classList.add('button-success');
        
        // Create sparkle effect
        createSparkleEffect(button);
        
        // Animate cart icon
        setTimeout(() => {
          animateCartIcon();
          animateCartCount(newCartCount);
        }, 200);
        
        // Show success notification
        setTimeout(() => {
          showCartSuccessNotification(productName);
        }, 400);
        
        // Reset button animation
        setTimeout(() => {
          button.classList.remove('button-success');
        }, 1200);
      }

      // Enhanced Add to Cart Form Handler
      document.addEventListener('DOMContentLoaded', function() {
        // Handle all add to cart forms
        document.querySelectorAll('form[action*="add-to-cart"]').forEach(form => {
          form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(form);
            const button = form.querySelector('button[type="submit"]');
            const originalText = button.innerHTML;
            
            // Show loading state
            button.disabled = true;
            button.innerHTML = `
              <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              Adding...
            `;
            
            fetch(form.action, {
              method: 'POST',
              body: formData,
              headers: {
                'X-Requested-With': 'XMLHttpRequest'
              }
            })
            .then(response => response.json())
            .then(data => {
              if (data.success) {
                // Get product name from nearby elements
                let productName = 'Item';
                const productTitle = form.closest('.product-card')?.querySelector('h3')?.textContent ||
                                   form.closest('.bg-white')?.querySelector('h1')?.textContent ||
                                   document.querySelector('h1')?.textContent ||
                                   'Product';
                
                handleAddToCartSuccess(form, productName.trim(), data.cart_count);
              } else {
                // Show error
                showCartSuccessNotification('Error adding item to cart');
              }
            })
            .catch(error => {
              console.error('Error:', error);
              showCartSuccessNotification('Error adding item to cart');
            })
            .finally(() => {
              // Reset button
              setTimeout(() => {
                button.disabled = false;
                button.innerHTML = originalText;
              }, 800);
            });
          });
        });
      });

      // Enhanced message dismissal function
      function dismissMessage(button) {
        const toast = button.closest('.message-toast');
        toast.classList.add('dismissing');
        setTimeout(() => {
          toast.remove();
        }, 400);
      }
    </script>
    <!-- Modern Django Messages Display -->
    {% if messages %}
        <div id="messages-container" class="fixed top-32 right-4 z-50 space-y-3">
            {% for message in messages %}
                <div class="message-toast transform translate-x-full transition-all duration-500 ease-out
                    {% if message.tags == 'success' %}
                        bg-white text-gray-800 shadow-lg shadow-emerald-500/25 border-l-4 border-emerald-500
                    {% elif message.tags == 'error' %}
                        bg-white text-gray-800 shadow-lg shadow-amber-500/25 border-l-4 border-amber-500
                    {% elif message.tags == 'warning' %}
                        bg-white text-gray-800 shadow-lg shadow-amber-500/25 border-l-4 border-amber-500
                    {% else %}
                        bg-white text-gray-800 shadow-lg shadow-blue-500/25 border-l-4 border-blue-500
                    {% endif %}
                    rounded-2xl p-4 max-w-sm backdrop-blur-sm border border-gray-200 relative overflow-hidden"
                    data-message-type="{{ message.tags }}">
                    
                    <!-- Animated background pattern -->
                    <div class="absolute inset-0 opacity-10">
                        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 animate-pulse"></div>
                    </div>
                    
                    <!-- Floating particles -->
                    <div class="absolute inset-0 overflow-hidden pointer-events-none">
                        <div class="absolute top-2 left-4 w-1 h-1 
                            {% if message.tags == 'success' %}bg-emerald-400/60{% elif message.tags == 'error' %}bg-amber-400/60{% elif message.tags == 'warning' %}bg-amber-400/60{% else %}bg-blue-400/60{% endif %} 
                            rounded-full animate-ping" style="animation-delay: 0.5s;"></div>
                        <div class="absolute top-6 right-8 w-1 h-1 
                            {% if message.tags == 'success' %}bg-emerald-300/50{% elif message.tags == 'error' %}bg-amber-300/50{% elif message.tags == 'warning' %}bg-amber-300/50{% else %}bg-blue-300/50{% endif %} 
                            rounded-full animate-ping" style="animation-delay: 1s;"></div>
                        <div class="absolute bottom-4 left-8 w-1 h-1 
                            {% if message.tags == 'success' %}bg-emerald-500/70{% elif message.tags == 'error' %}bg-amber-500/70{% elif message.tags == 'warning' %}bg-amber-500/70{% else %}bg-blue-500/70{% endif %} 
                            rounded-full animate-ping" style="animation-delay: 1.5s;"></div>
                    </div>
                    
                    <div class="relative z-10 flex items-start">
                        <div class="flex-shrink-0 mr-3">
                            {% if message.tags == 'success' %}
                                <div class="icon-container w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path>
                                    </svg>
                                </div>
                            {% elif message.tags == 'error' %}
                                <div class="icon-container w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </div>
                            {% elif message.tags == 'warning' %}
                                <div class="icon-container w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                                    </svg>
                                </div>
                            {% else %}
                                <div class="icon-container w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                </div>
                            {% endif %}
                        </div>
                        
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center justify-between mb-1">
                                <h4 class="text-sm font-bold text-gray-800">
                                    {% if message.tags == 'success' %}
                                        🎉 Success!
                                    {% elif message.tags == 'error' %}
                                        ⚠️ Oops!
                                    {% elif message.tags == 'warning' %}
                                        ⚡ Heads up!
                                    {% else %}
                                        💡 Info
                                    {% endif %}
                                </h4>
                                <button class="text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-full hover:bg-gray-100" onclick="dismissMessage(this)">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            <p class="text-sm text-gray-700 leading-relaxed font-medium">{{ message }}</p>
                        </div>
                    </div>
                    
                    <!-- Progress bar for auto-dismiss -->
                    <div class="absolute bottom-0 left-0 right-0 h-1 bg-white/20 overflow-hidden">
                        <div class="progress-bar h-full bg-white/40 transform -translate-x-full transition-transform ease-linear" style="animation: progressBar 5s linear forwards;"></div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <!-- Main Content -->
    <main class="flex-1 w-full">
        {% block content %}{% endblock %}
    </main>
    <!-- Footer -->
    <footer class="shadow-2xl transition-all duration-300 relative overflow-hidden" style="background: linear-gradient(135deg, #000000 0%, #3E2723 50%, #000000 100%); color: #F5F5DC;">
      <!-- Background Pattern -->
      <div class="absolute inset-0 opacity-5">
        <div class="absolute inset-0" style="background-image: url('data:image/svg+xml,<svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="%23ffffff" fill-opacity="0.1"><circle cx="30" cy="30" r="2"/></g></svg>');"></div>
      </div>
      
      <!-- Main Footer Content -->
      <div class="relative z-10">
        <!-- Top Section with Company Info -->
        <div class="border-b py-16" style="border-color: rgba(139, 69, 19, 0.4);">
          <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
              <!-- Company Brand -->
              <div class="text-center lg:text-left">
                <div class="flex items-center justify-center lg:justify-start mb-6">
                  <img src="{% static 'timelesscart-logo.png' %}" alt="Timeless Cart Logo" class="h-20 w-auto mr-4" />
                  <div>
                    <h2 class="text-3xl font-black tracking-wider" style="color: #FEFEFE;">oraagh</h2>
                    <p class="text-sm font-medium" style="color: #F0F0E6;">Premium woolen Collection</p>
                  </div>
                </div>
                <p class="text-lg leading-relaxed max-w-lg mx-auto lg:mx-0" style="color: #F0F0E6;">
                  Curating exceptional shawls and wraps from around the world. Discover unique pieces with rich heritage and timeless elegance for fashion enthusiasts.
                </p>
              </div>
              
              <!-- Contact Info & Social -->
              <div class="text-center lg:text-right">
                <div class="space-y-4 mb-8">
                  <div class="flex items-center justify-center lg:justify-end" style="color: #F0F0E6;">
                    <i class="fas fa-map-marker-alt mr-3" style="color: #8B4513;"></i>
                    <span>Lahore, Punjab, Pakistan</span>
                  </div>
                  <div class="flex items-center justify-center lg:justify-end" style="color: #F0F0E6;">
                    <i class="fas fa-phone mr-3" style="color: #8B4513;"></i>
                    <span>+92 300 1234567</span>
                  </div>
                  <div class="flex items-center justify-center lg:justify-end" style="color: #F0F0E6;">
                    <i class="fas fa-envelope mr-3" style="color: #8B4513;"></i>
                    <span>info@oraagh.pk</span>
                  </div>
                </div>
                
                <!-- Social Media Icons -->
                <div class="flex justify-center lg:justify-end space-x-4">
                  <a href="#" class="social-icon group" aria-label="Facebook">
                    <div class="p-4 rounded-xl border transition-all duration-300" style="background: rgba(139, 69, 19, 0.2); border-color: rgba(139, 69, 19, 0.3);" onmouseover="this.style.background='rgba(139, 69, 19, 0.4)'; this.style.borderColor='rgba(139, 69, 19, 0.6)'" onmouseout="this.style.background='rgba(139, 69, 19, 0.2)'; this.style.borderColor='rgba(139, 69, 19, 0.3)'">
                      <i class="fab fa-facebook-f text-xl group-hover:scale-110 transition-transform"></i>
                    </div>
                  </a>
                  <a href="#" class="social-icon group" aria-label="Instagram">
                    <div class="p-4 rounded-xl border transition-all duration-300" style="background: rgba(139, 69, 19, 0.2); border-color: rgba(139, 69, 19, 0.3);" onmouseover="this.style.background='rgba(139, 69, 19, 0.4)'; this.style.borderColor='rgba(139, 69, 19, 0.6)'" onmouseout="this.style.background='rgba(139, 69, 19, 0.2)'; this.style.borderColor='rgba(139, 69, 19, 0.3)'">
                      <i class="fab fa-instagram text-xl group-hover:scale-110 transition-transform"></i>
                    </div>
                  </a>
                  <a href="#" class="social-icon group" aria-label="Twitter">
                    <div class="p-4 rounded-xl border transition-all duration-300" style="background: rgba(139, 69, 19, 0.2); border-color: rgba(139, 69, 19, 0.3);" onmouseover="this.style.background='rgba(139, 69, 19, 0.4)'; this.style.borderColor='rgba(139, 69, 19, 0.6)'" onmouseout="this.style.background='rgba(139, 69, 19, 0.2)'; this.style.borderColor='rgba(139, 69, 19, 0.3)'">
                      <i class="fab fa-twitter text-xl group-hover:scale-110 transition-transform"></i>
                    </div>
                  </a>
                  <a href="#" class="social-icon group" aria-label="LinkedIn">
                    <div class="p-4 rounded-xl border transition-all duration-300" style="background: rgba(139, 69, 19, 0.2); border-color: rgba(139, 69, 19, 0.3);" onmouseover="this.style.background='rgba(139, 69, 19, 0.4)'; this.style.borderColor='rgba(139, 69, 19, 0.6)'" onmouseout="this.style.background='rgba(139, 69, 19, 0.2)'; this.style.borderColor='rgba(139, 69, 19, 0.3)'">
                      <i class="fab fa-linkedin-in text-xl group-hover:scale-110 transition-transform"></i>
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Links Section -->
        <div class="py-16">
          <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
              
              <!-- Quick Links -->
              <div class="footer-section">
                <h3 class="text-xl font-bold mb-6 flex items-center" style="color: #F0F0E6;">
                  <i class="fas fa-link mr-3" style="color: #8B4513;"></i>Quick Links
                </h3>
                <ul class="space-y-3">
                  <li>
                    <a href="/" class="footer-link flex items-center group" style="color: #F0F0E6;" onmouseover="this.style.color='#FEFEFE'; this.style.transform='translateX(5px)'" onmouseout="this.style.color='#F0F0E6'; this.style.transform='translateX(0)'">
                      <i class="fas fa-home mr-3 w-4" style="color: #8B4513;"></i>
                      <span>Home</span>
                    </a>
                  </li>
                  <li>
                    <a href="{% url 'products:product_list' %}" class="footer-link flex items-center group">
                      <i class="fas fa-gem mr-3 text-amber-400 group-hover:text-white transition-colors w-4"></i>
                      <span>Products</span>
                    </a>
                  </li>
                  <li>
                    <a href="{% url 'core:about' %}" class="footer-link flex items-center group">
                      <i class="fas fa-info-circle mr-3 text-amber-400 group-hover:text-white transition-colors w-4"></i>
                      <span>About Us</span>
                    </a>
                  </li>
                  <li>
                    <a href="/contact/" class="footer-link flex items-center group">
                      <i class="fas fa-envelope mr-3 text-amber-400 group-hover:text-white transition-colors w-4"></i>
                      <span>Contact</span>
                    </a>
                  </li>
                  <li>
                    <a href="/blog/" class="footer-link flex items-center group">
                      <i class="fas fa-blog mr-3 text-amber-400 group-hover:text-white transition-colors w-4"></i>
                      <span>Blog</span>
                    </a>
                  </li>
                </ul>
              </div>
              
              <!-- Account Links -->
              <div class="footer-section">
                <h3 class="text-xl font-bold mb-6 flex items-center" style="color: #F0F0E6;">
                  <i class="fas fa-user mr-3" style="color: #8B4513;"></i>My Account
                </h3>
                <ul class="space-y-3">
                  {% if user.is_authenticated %}
                    <li>
                      <a href="{% url 'accounts:profile' %}" class="footer-link flex items-center group">
                        <i class="fas fa-user-circle mr-3 text-amber-400 group-hover:text-white transition-colors w-4"></i>
                        <span>My Profile</span>
                      </a>
                    </li>
                    <li>
                      <a href="{% url 'accounts:order_history' %}" class="footer-link flex items-center group">
                        <i class="fas fa-history mr-3 text-amber-400 group-hover:text-white transition-colors w-4"></i>
                        <span>Order History</span>
                      </a>
                    </li>
                    <li>
                      <a href="{% url 'orders:cart' %}" class="footer-link flex items-center group">
                        <i class="fas fa-shopping-cart mr-3 text-amber-400 group-hover:text-white transition-colors w-4"></i>
                        <span>Shopping Cart</span>
                      </a>
                    </li>
                    <li>
                      <a href="{% url 'accounts:logout' %}" class="footer-link flex items-center group">
                        <i class="fas fa-sign-out-alt mr-3 text-amber-400 group-hover:text-white transition-colors w-4"></i>
                        <span>Logout</span>
                      </a>
                    </li>
                  {% else %}
                    <li>
                      <a href="{% url 'accounts:login' %}" class="footer-link flex items-center group">
                        <i class="fas fa-sign-in-alt mr-3 text-amber-400 group-hover:text-white transition-colors w-4"></i>
                        <span>Login</span>
                      </a>
                    </li>
                    <li>
                      <a href="{% url 'accounts:signup' %}" class="footer-link flex items-center group">
                        <i class="fas fa-user-plus mr-3 text-amber-400 group-hover:text-white transition-colors w-4"></i>
                        <span>Sign Up</span>
                      </a>
                    </li>
                  {% endif %}
                </ul>
              </div>
              
              <!-- Legal Links -->
              <div class="footer-section">
                <h3 class="text-xl font-bold mb-6 text-amber-300 flex items-center">
                  <i class="fas fa-shield-alt mr-3 text-amber-400"></i>Legal
                </h3>
                <ul class="space-y-3">
                  <li>
                    <a href="{% url 'core:privacy_policy' %}" class="footer-link flex items-center group">
                      <i class="fas fa-user-shield mr-3 text-amber-400 group-hover:text-white transition-colors w-4"></i>
                      <span>Privacy Policy</span>
                    </a>
                  </li>
                  <li>
                    <a href="{% url 'core:terms_of_use' %}" class="footer-link flex items-center group">
                      <i class="fas fa-file-contract mr-3 text-amber-400 group-hover:text-white transition-colors w-4"></i>
                      <span>Terms of Use</span>
                    </a>
                  </li>
                  <li>
                    <a href="{% url 'core:cookie_policy' %}" class="footer-link flex items-center group">
                      <i class="fas fa-cookie-bite mr-3 text-amber-400 group-hover:text-white transition-colors w-4"></i>
                      <span>Cookie Policy</span>
                    </a>
                  </li>
                </ul>
              </div>
              
              <!-- Newsletter -->
              <div class="footer-section">
                <h3 class="text-xl font-bold mb-6 flex items-center" style="color: #F0F0E6;">
                  <i class="fas fa-envelope-open mr-3" style="color: #8B4513;"></i>Newsletter
                </h3>
                <p class="mb-6 text-sm leading-relaxed" style="color: #F0F0E6;">
                  Stay updated with our latest shawl collections and exclusive offers.
                </p>
                <div class="newsletter-container rounded-2xl p-6" style="background: rgba(139, 69, 19, 0.1); border: 1px solid rgba(139, 69, 19, 0.3);">
                  <form action="{% url 'newsletter:subscribe' %}" method="POST" class="space-y-4" id="newsletter-form">
                    {% csrf_token %}
                    <div class="relative">
                      <input type="email" name="email" placeholder="Enter your email" 
                             class="newsletter-input w-full px-4 py-3 rounded-xl transition-all duration-300" 
                             style="background: rgba(139, 69, 19, 0.2); color: #F5F5DC; border: 1px solid rgba(139, 69, 19, 0.4);" 
                             onfocus="this.style.borderColor='rgba(139, 69, 19, 0.7)'; this.style.background='rgba(139, 69, 19, 0.3)'" 
                             onblur="this.style.borderColor='rgba(139, 69, 19, 0.4)'; this.style.background='rgba(139, 69, 19, 0.2)'" 
                             required id="footer-email-input">
                    </div>
                    <button type="submit" class="newsletter-btn w-full font-bold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 relative overflow-hidden" style="background: #8B4513; color: #F5F5DC;" onmouseover="this.style.background='#654321'" onmouseout="this.style.background='#8B4513'" id="footer-newsletter-btn">
                      <span class="relative z-10 flex items-center justify-center">
                        <i class="fas fa-paper-plane mr-2"></i>
                        Subscribe Now
                      </span>
                      <div class="newsletter-loading-spinner" style="display: none;"></div>
                    </button>
                  </form>
                  <div id="newsletter-message-container" class="mt-4 text-center text-sm font-semibold"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Bottom Section -->
        <div class="border-t py-8" style="border-color: rgba(139, 69, 19, 0.2); background: rgba(139, 69, 19, 0.2);">
          <div class="container mx-auto px-4">
            <div class="flex flex-col lg:flex-row justify-between items-center gap-6">
              <!-- Copyright -->
              <div class="text-center lg:text-left">
                <p class="text-sm" style="color: #F0F0E6;">
                  &copy; {% now "Y" %} <span class="font-semibold">oraagh</span>. All rights reserved.
                </p>
              </div>
              
             
            
              <!-- Developer Credit -->
              <div class="text-center lg:text-right">
                <p class="text-sm" style="color: #F0F0E6;">
                  Designed & Developed by 
                  <a href="https://sameergul.com" target="_blank" rel="noopener noreferrer" 
                     class="font-semibold transition-colors duration-300 hover:underline" style="color: #FEFEFE;" onmouseover="this.style.color='#F0F0E6'" onmouseout="this.style.color='#FEFEFE'">
                    Sameer Gul
                  </a>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script>
        // Mobile menu toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        if (mobileMenuButton) {
            mobileMenuButton.addEventListener('click', () => {
                const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
                mobileMenuButton.setAttribute('aria-expanded', !isExpanded);
                mobileMenu.classList.toggle('hidden');
            });
        }
        
        // Newsletter Form Animation Handler
        function showNewsletterNotification(type, message) {
            // Remove any existing notifications
            const existingNotifications = document.querySelectorAll('.newsletter-notification');
            existingNotifications.forEach(notification => {
                notification.classList.add('hide');
                setTimeout(() => notification.remove(), 400);
            });
            
            // Create new notification
            const notification = document.createElement('div');
            notification.className = `newsletter-notification ${type}`;
            
            const icon = type === 'success' ? 'fa-check' : 'fa-exclamation-triangle';
            
            notification.innerHTML = `
                <div class="flex items-center">
                    <div class="icon">
                        <i class="fas ${icon}"></i>
                    </div>
                    <div class="flex-1">
                        <div class="font-semibold text-sm">${type === 'success' ? 'Success!' : 'Error!'}</div>
                        <div class="text-sm opacity-90">${message}</div>
                    </div>
                    <button class="close-btn" onclick="this.parentElement.parentElement.classList.add('hide'); setTimeout(() => this.parentElement.parentElement.remove(), 400);">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.classList.add('hide');
                    setTimeout(() => notification.remove(), 400);
                }
            }, 5000);
        }
        
        // Handle newsletter form submissions
        document.addEventListener('DOMContentLoaded', function() {
            const newsletterForms = document.querySelectorAll('form[action*="newsletter:subscribe"]');
            
            newsletterForms.forEach(form => {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const emailInput = form.querySelector('input[name="email"]');
                    const submitBtn = form.querySelector('button[type="submit"]');
                    const spinner = form.querySelector('.newsletter-loading-spinner');
                    
                    // Reset input states
                    emailInput.classList.remove('error', 'success');
                    
                    // Validate email
                    const email = emailInput.value.trim();
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    
                    if (!email || !emailRegex.test(email)) {
                        emailInput.classList.add('error');
                        showNewsletterNotification('error', 'Please enter a valid email address.');
                        return;
                    }
                    
                    // Show loading state
                    form.classList.add('newsletter-form-loading');
                    if (spinner) spinner.style.display = 'block';
                    
                    // Submit form
                    const formData = new FormData(form);
                    
                    fetch(form.action, {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'X-Requested-With': 'XMLHttpRequest',
                        }
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'success') {
                            emailInput.classList.add('success');
                            emailInput.value = '';
                            showNewsletterNotification('success', data.message);
                        } else {
                            emailInput.classList.add('error');
                            showNewsletterNotification('error', data.message);
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        emailInput.classList.add('error');
                        showNewsletterNotification('error', 'Something went wrong. Please try again later.');
                    })
                    .finally(() => {
                        // Hide loading state
                        form.classList.remove('newsletter-form-loading');
                        if (spinner) spinner.style.display = 'none';
                    });
                });
            });
            
            // Handle Django messages if they exist (for non-AJAX submissions)
            const djangoMessagesElement = document.getElementById('django-messages-data');
            if (djangoMessagesElement) {
                try {
                    const djangoMessages = JSON.parse(djangoMessagesElement.textContent);
                    djangoMessages.forEach(msg => {
                        showNewsletterNotification(msg.type, msg.message);
                    });
                } catch (e) {
                    console.error('Error parsing Django messages:', e);
                }
            }
        });
    </script>

    {% block scripts %}
{% endblock %}
{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const newsletterForm = document.getElementById('newsletter-form');
        if (newsletterForm) {
            newsletterForm.addEventListener('submit', function(e) {
                e.preventDefault();

                const form = e.target;
                const formData = new FormData(form);
                const messageContainer = document.getElementById('newsletter-message-container');
                const submitButton = form.querySelector('button[type="submit"]');
                const buttonText = submitButton.querySelector('.z-10');

                // Clear previous messages and disable button
                messageContainer.textContent = '';
                submitButton.disabled = true;
                buttonText.textContent = 'Subscribing...';

                fetch(form.action, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest',
                        'X-CSRFToken': formData.get('csrfmiddlewaretoken'),
                    },
                })
                .then(response => response.json().then(data => ({ status: response.status, body: data })))
                .then(({ status, body }) => {
                    if (status === 200 && body.status === 'success') {
                        messageContainer.style.color = '#4ade80'; // Tailwind green-400
                        messageContainer.textContent = body.message;
                        form.reset();
                    } else {
                        messageContainer.style.color = '#8B4513'; // Brown color
                        messageContainer.textContent = body.message || 'An error occurred.';
                    }
                })
                .catch(error => {
                    messageContainer.style.color = '#8B4513'; // Brown color
                    messageContainer.textContent = 'An unexpected error occurred. Please try again.';
                    console.error('Error:', error);
                })
                .finally(() => {
                    // Re-enable button and restore text
                    submitButton.disabled = false;
                    buttonText.textContent = 'Subscribe Now';
                });
            });
        }
    });
</script>
{% endblock %}
    <!-- Cookie Consent Banner -->
    <div id="cookie-consent-banner" class="fixed bottom-0 left-0 right-0 bg-gray-800 bg-opacity-90 backdrop-blur-sm text-white p-4 z-50 transform translate-y-full transition-transform duration-500 ease-in-out" style="display: none;">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
            <p class="text-sm text-gray-300">
                We use cookies to enhance your browsing experience and analyze our traffic. By clicking "Accept," you consent to our use of cookies. Read our <a href="{% url 'core:cookie_policy' %}" class="text-amber-400 hover:underline font-semibold">Cookie Policy</a> for more details.
            </p>
            <div class="flex items-center gap-4 flex-shrink-0">
                <button id="cookie-deny" class="px-4 py-2 text-sm font-medium text-gray-300 rounded-md hover:bg-gray-700 transition-colors">Deny</button>
                <button id="cookie-accept" class="px-6 py-2 text-sm font-semibold text-white bg-amber-600 rounded-md hover:bg-amber-700 transition-colors transform hover:scale-105">Accept</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const banner = document.getElementById('cookie-consent-banner');
            const acceptBtn = document.getElementById('cookie-accept');
            const denyBtn = document.getElementById('cookie-deny');

            // Function to get a cookie
            function getCookie(name) {
                let cookieArr = document.cookie.split(';');
                for(let i = 0; i < cookieArr.length; i++) {
                    let cookiePair = cookieArr[i].split('=');
                    if(name == cookiePair[0].trim()) {
                        return decodeURIComponent(cookiePair[1]);
                    }
                }
                return null;
            }

            // Function to set a cookie
            function setCookie(name, value, days) {
                let expires = "";
                if (days) {
                    let date = new Date();
                    date.setTime(date.getTime() + (days*24*60*60*1000));
                    expires = "; expires=" + date.toUTCString();
                }
                document.cookie = name + "=" + (value || "")  + expires + "; path=/";
            }

            // Show banner if consent not given
            if (!getCookie('cookie_consent')) {
                banner.style.display = 'block';
                setTimeout(() => {
                    banner.classList.remove('translate-y-full');
                }, 100);
            }

            // Handle accept
            acceptBtn.addEventListener('click', () => {
                setCookie('cookie_consent', 'accepted', 365);
                banner.classList.add('translate-y-full');
                setTimeout(() => {
                    banner.style.display = 'none';
                }, 500);
            });

            // Handle deny
            denyBtn.addEventListener('click', () => {
                setCookie('cookie_consent', 'denied', 365);
                banner.classList.add('translate-y-full');
                setTimeout(() => {
                    banner.style.display = 'none';
                }, 500);
            });
        });
    </script>
  <script>
    // Function to update cart count in header
    function updateCartCount(newCount) {
      const cartCountElements = document.querySelectorAll('.cart-count');
      cartCountElements.forEach(element => {
        element.textContent = newCount;
      });
      
      // Update mobile cart badge visibility
      const mobileCartBadge = document.querySelector('.mobile-cart-badge');
      if (mobileCartBadge) {
        if (newCount > 0) {
          mobileCartBadge.style.display = 'inline';
          mobileCartBadge.textContent = newCount;
        } else {
          mobileCartBadge.style.display = 'none';
        }
      }
    }

    // Profile dropdown functionality
    document.addEventListener('DOMContentLoaded', function() {
      const profileBtn = document.getElementById('profile-dropdown-btn');
      const profileDropdown = document.getElementById('profile-dropdown');
      const profileArrow = document.getElementById('profile-dropdown-arrow');
      
      if (profileBtn && profileDropdown) {
        profileBtn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          
          const isVisible = !profileDropdown.classList.contains('opacity-0');
          
          if (isVisible) {
            // Hide dropdown
            profileDropdown.classList.add('opacity-0', 'invisible', 'scale-95');
            profileDropdown.classList.remove('opacity-100', 'visible', 'scale-100');
            if (profileArrow) {
              profileArrow.classList.remove('rotate-180');
            }
          } else {
            // Show dropdown
            profileDropdown.classList.remove('opacity-0', 'invisible', 'scale-95');
            profileDropdown.classList.add('opacity-100', 'visible', 'scale-100');
            if (profileArrow) {
              profileArrow.classList.add('rotate-180');
            }
          }
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
          if (!profileBtn.contains(e.target) && !profileDropdown.contains(e.target)) {
            profileDropdown.classList.add('opacity-0', 'invisible', 'scale-95');
            profileDropdown.classList.remove('opacity-100', 'visible', 'scale-100');
            if (profileArrow) {
              profileArrow.classList.remove('rotate-180');
            }
          }
        });
      }

      // Handle Add to Cart form submissions
      const addToCartForms = document.querySelectorAll('form[action*="add-to-cart"]');
      
      // Duplicate add to cart handlers removed - handled above in DOMContentLoaded
    });

    // Toast notification function
    function showToast(message, type = 'info') {
      const toast = document.createElement('div');
      toast.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-lg text-white font-medium transform translate-x-full transition-transform duration-300 ${
        type === 'success' ? 'bg-green-500' : 
        type === 'error' ? 'bg-amber-500' : 
        'bg-blue-500'
      }`;
      toast.textContent = message;
      
      document.body.appendChild(toast);
      
      // Slide in
      setTimeout(() => {
        toast.classList.remove('translate-x-full');
      }, 100);
      
      // Slide out and remove
      setTimeout(() => {
        toast.classList.add('translate-x-full');
        setTimeout(() => {
          document.body.removeChild(toast);
        }, 300);
      }, 3000);
    }
  </script>
  </body>
</html>